<div class="mobile-wrapper">
  <div class="mobile-container">
    <div class="panel">
      <div class="nav-header">
        @if (enterpriseInfo) {
          <a [routerLink]="['/' | relativeUrl]">
            <img [src]="enterpriseInfo.logoUrl" [alt]="enterpriseInfo.title" class="subdomain_logo" [class.custom_logo]="!enterpriseInfo?.dualLogo" [class.rounded]="enterpriseInfo.rounded_corner">
          </a>
          @if (enterpriseInfo.dualLogo) {
            <div class="vertical-line"></div>
          }
        }
        @if (!enterpriseInfo || enterpriseInfo.dualLogo) {
          <a [routerLink]="['/' | relativeUrl]">
            <app-svg-images *ngIf="!officialMempoolSpace" name="mempoolSpace" style="width: 144px; height: 36px" viewBox="0 0 500 126" width="500" height="126" class="mempool-logo"></app-svg-images>
            <app-svg-images *ngIf="officialMempoolSpace" name="officialMempoolSpace" style="width: 144px; height: 36px" width="500" height="126" viewBox="0 0 500 126"></app-svg-images>
          </a>
        }

        @if (!enterpriseInfo || !enterpriseInfo.dualLogo) {
          <div [ngSwitch]="network" class="network-label">
            <span *ngSwitchCase="'signet'" class="network signet"><span class="name">Bitcoin Signet</span><app-svg-images name="signet" width="35" height="35" viewBox="0 0 65 65" style="display: inline-block" class="mainnet ml-2"></app-svg-images></span>
            <span *ngSwitchCase="'testnet'" class="network testnet"><span class="name">Bitcoin Testnet3</span><app-svg-images name="testnet" width="35" height="35" viewBox="0 0 65 65" style="display: inline-block" class="mainnet ml-2"></app-svg-images></span>
            <span *ngSwitchCase="'testnet4'" class="network testnet"><span class="name">Bitcoin Testnet4</span><app-svg-images name="testnet4" width="35" height="35" viewBox="0 0 65 65" style="display: inline-block" class="mainnet ml-2"></app-svg-images></span>
            <span *ngSwitchCase="'liquid'" class="network liquid"><span class="name">Liquid</span><app-svg-images name="liquid" width="35" height="35" viewBox="0 0 125 125" style="display: inline-block" class="mainnet ml-2"></app-svg-images></span>
            <span *ngSwitchCase="'liquidtestnet'" class="network liquidtestnet"><span class="name">Liquid Testnet</span><app-svg-images name="liquidtestnet" width="35" height="35" viewBox="0 0 125 125" style="display: inline-block" class="mainnet ml-2"></app-svg-images></span>
            <span *ngSwitchDefault class="network mainnet"><span class="name">Bitcoin</span><app-svg-images name="bitcoin" width="35" height="35" viewBox="0 0 65 65" style="display: inline-block" class="mainnet ml-2"></app-svg-images></span>
          </div>
        }
      </div>
    </div>
      <div class="field" *ngIf="addressId">
        <div class="heading-label" style="margin-bottom: 0;" i18n="address">Address
          <div class="value" style="display: inline-block; padding-left: 3em;">
            <app-truncate [text]="addressId" [lastChars]="6" [maxWidth]="200" [link]="['/address/' | relativeUrl, addressId]">
              <app-clipboard [text]="addressId"></app-clipboard>
            </app-truncate>
          </div>
        </div>
      </div>

      <div class="field" *ngIf="addressId && !error">        
          @if (confirmedBalance !== undefined && pendingBalance !== undefined) {
            <div class="heading-label" i18n="address.balance">BALANCE</div>
            <div class="label" i18n="address.confirmed.balance"  style="font-weight: bold;">Confirmed:
              <div class="value" style="color: forestgreen;">
                <app-amount [satoshis]="confirmedBalance" [noFiat]="true" style="font-size: large;"></app-amount>
                <span class="fiat"><app-fiat [value]="confirmedBalance" style="font-weight: normal;"></app-fiat></span>
              </div>
            </div>
            <div class="label" i18n="address.pending.balance" style="font-weight: bold;">Pending:
              <div class="value" style="color: #ff9900;">
                <app-amount [satoshis]="pendingBalance" [noFiat]="true" style="font-size: large;"></app-amount>
                <span class="fiat"><app-fiat [value]="pendingBalance" style="font-weight: normal;"></app-fiat></span>
              </div>
            </div>
          } @else {
            <span class="skeleton-loader" style="max-width: 300px;"></span>
            <span class="tracker-bar"></span>
            <span class="skeleton-loader" style="max-width: 300px;"></span>
          }
      </div>

      <div class="field" *ngIf="addressId && !error">
        <div class="heading-label" i18n="address.transactions">RECENT ACTIVITY</div>
        @if (transactions.length > 0 && !isLoading) {
          <div class="field" style="padding: 0; background: transparent;">
            <div class="tx-row" *ngFor="let tx of transactions | slice:0:5">
              @if (tx.type === 'sent') {
                @if(tx.isConfirmed) {
                  <div class="tx-icon sent">
                    <fa-icon [icon]="['fas', 'arrow-up']" [fixedWidth]="true"></fa-icon>
                  </div>
                } @else {
                  <div class="tx-icon sent pending">
                    <fa-icon [icon]="['fas', 'arrow-up']" [fixedWidth]="true"></fa-icon>
                  </div>
                }
                <div class="tx-details">
                  <span class="tx-type" i18n="address.transaction.sent">Sent</span>
                  @if(tx.isConfirmed) {
                    <span class="tx-time"><app-time kind="since" [time]="tx.blockTime" [fastRender]="true"></app-time></span>
                  } @else {
                    <span class="tx-time" style="color: #ff9900; font-weight: bold;">Pending</span>
                  }
                </div>
                <div class="tx-amount-container">
                  @if(tx.isConfirmed) {
                    <span style="color: #dc3545;">-<app-amount [satoshis]="tx.value" [noFiat]="true"></app-amount></span>
                  } @else {
                    <span style="color: #ff9900;">-<app-amount [satoshis]="tx.value" [noFiat]="true"></app-amount></span>
                  }
                </div>
              } 
              @else if (tx.type === 'received') {
                @if(tx.isConfirmed) {
                  <div class="tx-icon received">
                    <fa-icon [icon]="['fas', 'arrow-down']" [fixedWidth]="true"></fa-icon>
                  </div>
                } @else {
                  <div class="tx-icon received pending">
                    <fa-icon [icon]="['fas', 'arrow-down']" [fixedWidth]="true"></fa-icon>
                  </div>
                }
                <div class="tx-details">
                  <span class="tx-type" i18n="address.transaction.received">Received</span>
                  @if(tx.isConfirmed) {
                    <span class="tx-time"><app-time kind="since" [time]="tx.blockTime" [fastRender]="true"></app-time></span>
                  } @else {
                    <span class="tx-time" style="color: #ff9900; font-weight: bold;">Pending</span>
                  }
                </div>
                <div class="tx-amount-container">
                  @if(tx.isConfirmed) {
                    <span style="color: forestgreen;">+<app-amount [satoshis]="tx.value" [noFiat]="true"></app-amount></span>
                  } @else {
                    <span style="color: #ff9900;">+<app-amount [satoshis]="tx.value" [noFiat]="true"></app-amount></span>
                  }
                </div>
              }
            </div>
          </div>
        } @else if (transactions.length == 0 && !isLoading) {
          <div class="label" i18n="address.no.transactions" style="font-size: larger;">This address has no transactions yet.</div>
        } @else {
          <span class="skeleton-loader" style="max-width: 300px;"></span>
          <span class="tracker-bar"></span>
          <span class="skeleton-loader" style="max-width: 300px;"></span>
          <span class="tracker-bar"></span>
          <span class="skeleton-loader" style="max-width: 300px;"></span>
          <span class="tracker-bar"></span>
          <span class="skeleton-loader" style="max-width: 300px;"></span>
          <span class="tracker-bar"></span>
          <span class="skeleton-loader" style="max-width: 300px;"></span>
        }
      </div>

    <div class="bottom-panel" *ngIf="error && !isLoading">
      <app-http-error [error]="error">
        <span i18n="address.error.loading-address-data">Error loading address data.</span>
      </app-http-error>
    </div>
    <div class="footer-link"
      [routerLink]="['/address' | relativeUrl, addressId]"
      [queryParams]="{ mode: 'details' }"
      queryParamsHandling="merge"
    >
      <span><ng-container i18n="address.show-more-details">See more details</ng-container>&nbsp;<fa-icon [icon]="['fas', 'arrow-alt-circle-right']"></fa-icon></span>
    </div>
  </div>
</div>